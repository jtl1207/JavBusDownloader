const container=document.getElementById("macy-container"),mesElement=document.getElementById("mes");async function GetMoviesMod(){document.getElementById("FormType").textContent="normal"==await webBrowserObj.GetMoviesMod()?"无码":"有码"}var cardsList;GetMoviesMod();let 显示的卡片=[],完成的卡片数量=0;setInterval(GetMoviesList,1e3),setInterval(clock,1e3);var Lock1=!1;function clock(){if(!Lock1)if(Lock1=!0,cardsList){if(完成的卡片数量==cardsList.length)mesElement.innerHTML="加载完成 "+cardsList.length;else if(显示的卡片.length==cardsList.length){var t=0;cardsList.forEach((e=>{2==e.Value.state&&t++})),完成的卡片数量=t,mesElement.innerHTML="加载中 "+完成的卡片数量+"/"+cardsList.length}else{mesElement.innerHTML="加载中 "+完成的卡片数量+"/"+cardsList.length;var e=!1,n=document.createDocumentFragment();cardsList.forEach((t=>{显示的卡片.includes(t.Key)||(addcard(n,t.Key,t.Value.img,t.Value.title,t.Value.date,t.Value.tags),显示的卡片.push(t.Key),e=!0)})),e&&(container.appendChild(n),masonry=new Masonry("#main",{itemSelector:".movie-box",isFitWidth:!0}))}Lock1=!1}else Lock1=!1}async function GetMoviesList(){var t=await webBrowserObj.GetMoviesList();cardsList=JSON.parse(t)}async function DownloadMovie(t){Lock1||(Lock1=!0,await webBrowserObj.DownloadMovie(t),Lock1=!1)}function addcard(t,e,n,s,o,i){const a=document.createElement("div");a.setAttribute("class","movie-box"),a.setAttribute("id",e),a.setAttribute("style","position: absolute; left: 0px; top: 0px;"),a.addEventListener("click",(function(){DownloadMovie(e)}));const c=document.createElement("div");c.setAttribute("class","photo-frame");const r=document.createElement("img");r.setAttribute("src",n),c.appendChild(r),a.appendChild(c);const d=document.createElement("div");d.setAttribute("class","photo-info");const l=document.createElement("span");l.setAttribute("style","color: var(--bs-emphasis-color);"),l.textContent=s,d.appendChild(l);const u=document.createElement("div");if(u.setAttribute("class","item-tag"),d.appendChild(u),i.length>0){i.forEach((t=>{const e=document.createElement("button");e.setAttribute("class","btn btn-primary disabled tag tag2"),e.setAttribute("disabled","disabled"),e.textContent=t,u.appendChild(e)}))}const m=document.createElement("span");m.setAttribute("class","redtitle"),m.textContent=e;const p=document.createElement("span");p.textContent=" / ";const b=document.createElement("span");b.setAttribute("class","redtitle"),b.textContent=o,d.appendChild(m),d.appendChild(p),d.appendChild(b),a.appendChild(d);const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("class","icon icon-tabler icon-tabler-check symbol"),h.setAttribute("xmlns","http://www.w3.org/2000/svg"),h.setAttribute("width","1em"),h.setAttribute("height","1em"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("stroke-width","2"),h.setAttribute("stroke","currentColor"),h.setAttribute("fill","none"),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linepush","round");const w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("stroke","none"),w.setAttribute("d","M0 0h24v24H0z"),h.appendChild(w);const v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d","M5 12l5 5l10 -10"),h.appendChild(v),a.appendChild(h),t.appendChild(a)}function CleanCard(){container.innerHTML=""}function SearchButton(){const t=document.getElementById("search");webBrowserObj.SearchMovies(t.value)}Lock1=!1;